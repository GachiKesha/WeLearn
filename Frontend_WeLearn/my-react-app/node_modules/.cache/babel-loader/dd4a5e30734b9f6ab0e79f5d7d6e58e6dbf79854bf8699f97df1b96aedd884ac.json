{"ast":null,"code":"/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\n\nimport * as utils from '../utils';\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      return this._localStreams;\n    };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track, stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track, stream));\n    };\n    window.RTCPeerConnection.prototype.addTrack = function addTrack(track, ...streams) {\n      if (streams) {\n        streams.forEach(stream => {\n          if (!this._localStreams) {\n            this._localStreams = [stream];\n          } else if (!this._localStreams.includes(stream)) {\n            this._localStreams.push(stream);\n          }\n        });\n      }\n      return _addTrack.apply(this, arguments);\n    };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      const index = this._localStreams.indexOf(stream);\n      if (index === -1) {\n        return;\n      }\n      this._localStreams.splice(index, 1);\n      const tracks = stream.getTracks();\n      this.getSenders().forEach(sender => {\n        if (tracks.includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n  }\n}\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams = function getRemoteStreams() {\n      return this._remoteStreams ? this._remoteStreams : [];\n    };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = e => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n      const pc = this;\n      if (!this._onaddstreampoly) {\n        this.addEventListener('track', this._onaddstreampoly = function (e) {\n          e.streams.forEach(stream => {\n            if (!pc._remoteStreams) {\n              pc._remoteStreams = [];\n            }\n            if (pc._remoteStreams.indexOf(stream) >= 0) {\n              return;\n            }\n            pc._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            pc.dispatchEvent(event);\n          });\n        });\n      }\n      return origSetRemoteDescription.apply(pc, arguments);\n    };\n  }\n}\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n  prototype.createOffer = function createOffer(successCallback, failureCallback) {\n    const options = arguments.length >= 2 ? arguments[2] : arguments[0];\n    const promise = origCreateOffer.apply(this, [options]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.createAnswer = function createAnswer(successCallback, failureCallback) {\n    const options = arguments.length >= 2 ? arguments[2] : arguments[0];\n    const promise = origCreateAnswer.apply(this, [options]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  let withCallback = function (description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n  withCallback = function (description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n  withCallback = function (candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = constraints => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n  if (!navigator.getUserMedia && navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints).then(cb, errcb);\n    }.bind(navigator);\n  }\n}\nexport function shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({}, constraints, {\n      video: utils.compactObject(constraints.video)\n    });\n  }\n  return constraints;\n}\nexport function shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection = function RTCPeerConnection(pcConfig, pcConstraints) {\n    if (pcConfig && pcConfig.iceServers) {\n      const newIceServers = [];\n      for (let i = 0; i < pcConfig.iceServers.length; i++) {\n        let server = pcConfig.iceServers[i];\n        if (server.urls === undefined && server.url) {\n          utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n          server = JSON.parse(JSON.stringify(server));\n          server.urls = server.url;\n          delete server.url;\n          newIceServers.push(server);\n        } else {\n          newIceServers.push(pcConfig.iceServers[i]);\n        }\n      }\n      pcConfig.iceServers = newIceServers;\n    }\n    return new OrigPeerConnection(pcConfig, pcConstraints);\n  };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {\n          receiver: this.receiver\n        };\n      }\n    });\n  }\n}\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer(offerOptions) {\n    if (offerOptions) {\n      if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n      }\n      const audioTransceiver = this.getTransceivers().find(transceiver => transceiver.receiver.track.kind === 'audio');\n      if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n        if (audioTransceiver.direction === 'sendrecv') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('sendonly');\n          } else {\n            audioTransceiver.direction = 'sendonly';\n          }\n        } else if (audioTransceiver.direction === 'recvonly') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('inactive');\n          } else {\n            audioTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveAudio === true && !audioTransceiver) {\n        this.addTransceiver('audio', {\n          direction: 'recvonly'\n        });\n      }\n      if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n      }\n      const videoTransceiver = this.getTransceivers().find(transceiver => transceiver.receiver.track.kind === 'video');\n      if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n        if (videoTransceiver.direction === 'sendrecv') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('sendonly');\n          } else {\n            videoTransceiver.direction = 'sendonly';\n          }\n        } else if (videoTransceiver.direction === 'recvonly') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('inactive');\n          } else {\n            videoTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveVideo === true && !videoTransceiver) {\n        this.addTransceiver('video', {\n          direction: 'recvonly'\n        });\n      }\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\nexport function shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}","map":{"version":3,"names":["utils","shimLocalStreamsAPI","window","RTCPeerConnection","prototype","getLocalStreams","_localStreams","_addTrack","addTrack","addStream","stream","includes","push","getAudioTracks","forEach","track","call","getVideoTracks","streams","apply","arguments","removeStream","index","indexOf","splice","tracks","getTracks","getSenders","sender","removeTrack","shimRemoteStreamsAPI","getRemoteStreams","_remoteStreams","Object","defineProperty","get","_onaddstream","set","f","removeEventListener","_onaddstreampoly","addEventListener","e","event","Event","dispatchEvent","origSetRemoteDescription","setRemoteDescription","pc","shimCallbacksAPI","origCreateOffer","createOffer","origCreateAnswer","createAnswer","setLocalDescription","addIceCandidate","successCallback","failureCallback","options","length","promise","then","Promise","resolve","withCallback","description","candidate","shimGetUserMedia","navigator","mediaDevices","getUserMedia","_getUserMedia","bind","constraints","shimConstraints","cb","errcb","video","undefined","assign","compactObject","shimRTCIceServerUrls","OrigPeerConnection","pcConfig","pcConstraints","iceServers","newIceServers","i","server","urls","url","deprecated","JSON","parse","stringify","generateCertificate","shimTrackEventTransceiver","RTCTrackEvent","receiver","shimCreateOfferLegacy","offerOptions","offerToReceiveAudio","audioTransceiver","getTransceivers","find","transceiver","kind","direction","setDirection","addTransceiver","offerToReceiveVideo","videoTransceiver","shimAudioContext","AudioContext","webkitAudioContext"],"sources":["C:/Users/Катя/Desktop/WeLearn/Frontend_WeLearn/node_modules/webrtc-adapter/src/js/safari/safari_shim.js"],"sourcesContent":["/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nimport * as utils from '../utils';\n\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams =\n      function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack =\n      function addTrack(track, ...streams) {\n        if (streams) {\n          streams.forEach((stream) => {\n            if (!this._localStreams) {\n              this._localStreams = [stream];\n            } else if (!this._localStreams.includes(stream)) {\n              this._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        const index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        const tracks = stream.getTracks();\n        this.getSenders().forEach(sender => {\n          if (tracks.includes(sender.track)) {\n            this.removeTrack(sender);\n          }\n        });\n      };\n  }\n}\n\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams =\n      function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        const pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(stream => {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              const event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n  }\n}\n\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer =\n    function createOffer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  prototype.createAnswer =\n    function createAnswer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = (constraints) => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n        .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nexport function shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({},\n      constraints,\n      {video: utils.compactObject(constraints.video)}\n    );\n  }\n\n  return constraints;\n}\n\nexport function shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection =\n    function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        const newIceServers = [];\n        for (let i = 0; i < pcConfig.iceServers.length; i++) {\n          let server = pcConfig.iceServers[i];\n          if (server.urls === undefined && server.url) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      'receiver' in window.RTCTrackEvent.prototype &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer =\n    function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio =\n            !!offerOptions.offerToReceiveAudio;\n        }\n        const audioTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'audio');\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          this.addTransceiver('audio', {direction: 'recvonly'});\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo =\n            !!offerOptions.offerToReceiveVideo;\n        }\n        const videoTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'video');\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          this.addTransceiver('video', {direction: 'recvonly'});\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n}\n\nexport function shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}